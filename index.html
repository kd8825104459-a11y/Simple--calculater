<!DOCTYPE html>
<html lang="hi">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Simple Calculator</title>
  <style>
    :root{
      --bg:#f3f4f6; --card:#ffffff; --accent:#0f766e; --btn:#e6e9ee;
      --btn-hover:#d4d7df;
    }
    *{box-sizing:border-box; font-family:system-ui,-apple-system,Segoe UI,Roboto,"Helvetica Neue",Arial;}
    body{
      margin:0; min-height:100vh; display:flex; align-items:center; justify-content:center;
      background:linear-gradient(180deg,var(--bg),#e9eef5);
      padding:20px;
    }
    .calc {
      width:360px; max-width:95vw; background:var(--card); border-radius:14px; box-shadow:0 8px 30px rgba(10,20,30,0.08);
      padding:18px;
    }
    .screen {
      height:70px; background:#f7fafc; border-radius:10px; padding:10px 14px;
      display:flex; flex-direction:column; justify-content:center; align-items:flex-end;
      font-size:20px; color:#0b1220; margin-bottom:12px; overflow:hidden;
    }
    .expr { font-size:14px; color:#5b6470; opacity:0.9; }
    .result { font-size:22px; font-weight:600; margin-top:4px; word-break:break-all; }

    .keys { display:grid; grid-template-columns:repeat(4,1fr); gap:10px; }
    button {
      height:56px; border-radius:10px; border:0; background:var(--btn); font-size:18px; cursor:pointer;
      box-shadow:0 2px 0 rgba(0,0,0,0.02), inset 0 -2px 0 rgba(0,0,0,0.02);
    }
    button:active{ transform:translateY(1px); }
    .op { background:#0f766e; color:white; font-weight:600; }
    .wide { grid-column:span 2; }
    .clr { background:#ef4444; color:white; font-weight:600; }
    .small { font-size:16px; height:48px; }

    @media (max-width:420px){
      .calc{ padding:12px; }
      .screen{ height:64px; font-size:18px; }
      button{ height:52px; font-size:16px; }
    }
  </style>
</head>
<body>
  <div class="calc" role="application" aria-label="Simple calculator">
    <div class="screen" id="screen">
      <div class="expr" id="expr"> </div>
      <div class="result" id="result">0</div>
    </div>

    <div class="keys" id="keys">
      <button class="clr" data-action="clear">C</button>
      <button data-action="back">⌫</button>
      <button data-value="%" class="op">%</button>
      <button data-value="/" class="op">÷</button>

      <button data-value="7">7</button>
      <button data-value="8">8</button>
      <button data-value="9">9</button>
      <button data-value="*" class="op">×</button>

      <button data-value="4">4</button>
      <button data-value="5">5</button>
      <button data-value="6">6</button>
      <button data-value="-" class="op">−</button>

      <button data-value="1">1</button>
      <button data-value="2">2</button>
      <button data-value="3">3</button>
      <button data-value="+" class="op">+</button>

      <button data-value="0" class="wide">0</button>
      <button data-value="." class="small">.</button>
      <button data-action="equals" class="op">=</button>
    </div>
  </div>

  <script>
    // Simple calculator logic
    (function(){
      const exprEl = document.getElementById('expr');
      const resultEl = document.getElementById('result');
      let expr = '';

      function updateView(){
        exprEl.textContent = expr || '';
        resultEl.textContent = expr ? tryEval(expr) : '0';
      }

      // Basic safe eval wrapper: only allow digits, operators, parentheses and dot
      function tryEval(s){
        // Replace unicode ×÷− with JS operators
        s = s.replace(/×/g,'*').replace(/÷/g,'/').replace(/−/g,'-').replace(/%/g, '/100');
        // Security: allow only [0-9()+\-*/.\s]
        if(!/^[0-9+\-*/().\s%]*$/.test(s)){
          return 'Error';
        }
        try{
          // eslint-disable-next-line no-new-func
          const val = new Function('return ('+s+')')();
          if(val === Infinity || val === -Infinity || Number.isNaN(val)) return 'Error';
          // limit decimals
          return (Math.round((val + Number.EPSILON) * 1e12) / 1e12).toString();
        } catch(e){
          return 'Error';
        }
      }

      document.getElementById('keys').addEventListener('click', e=>{
        const t = e.target;
        if(!t.matches('button')) return;
        const v = t.getAttribute('data-value');
        const a = t.getAttribute('data-action');

        if(a === 'clear'){
          expr = '';
        } else if(a === 'back'){
          expr = expr.slice(0, -1);
        } else if(a === 'equals'){
          const r = tryEval(expr);
          expr = (r === 'Error') ? '' : r;
        } else if(v){
          // prevent two operators in a row
          const last = expr.slice(-1);
          if(/[+\-*/.]/.test(v) && /[+\-*/.]/.test(last)){
            // replace last operator with new one (except dot)
            if(v === '.') {
              // allow dot after digit only
              if(!/[0-9]/.test(last)) return;
            } else {
              expr = expr.slice(0, -1) + v;
              updateView(); return;
            }
          }
          expr += v;
        }
        updateView();
      });

      // Keyboard support
      window.addEventListener('keydown', e=>{
        if(e.key === 'Enter') { e.preventDefault(); document.querySelector('[data-action="equals"]').click(); return; }
        if(e.key === 'Backspace') { document.querySelector('[data-action="back"]').click(); return; }
        if(e.key === 'Escape') { document.querySelector('[data-action="clear"]').click(); return; }
        if(/[0-9+\-*/().%]/.test(e.key)){
          const btn = Array.from(document.querySelectorAll('button[data-value]')).find(b=>b.getAttribute('data-value') === e.key);
          // If % isn't in keyboard map, allow %
          if(btn) btn.click();
          else if(e.key === '%') document.querySelector('[data-value="%"]').click();
        }
      });

      updateView();
    })();
  </script>
</body>
</html>